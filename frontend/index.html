<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Transcrição e Resumo</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
      }

      .card {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 16px;
        margin-top: 20px;
        background-color: #f9f9f9;
      }

      .label {
        font-weight: bold;
        margin-top: 10px;
      }

      .loading {
        font-style: italic;
        color: #555;
        margin-top: 20px;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <h2>Upload de Áudio ou Vídeo</h2>

    <form
      id="uploadForm"
      hx-post="/upload/"
      hx-target="#result"
      hx-indicator="#loading"
      hx-encoding="multipart/form-data"
    >
      <input
        type="file"
        name="file"
        accept=".mp3,.wav,.ogg,.mp4,.mkv,.avi,.mov"
        required
      />
      <button type="submit">Enviar</button>
    </form>

    <div id="loading" class="loading hidden">
      ⏳ Processando áudio... aguarde.
    </div>

    <div id="result"></div>

    <script>
      document.body.addEventListener("htmx:configRequest", function (evt) {
        document.getElementById("loading").classList.remove("hidden");
      });

      document.body.addEventListener("htmx:afterOnLoad", function (evt) {
        document.getElementById("loading").classList.add("hidden");
      });
    </script>
  </body>
</html>
